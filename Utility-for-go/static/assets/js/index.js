const navs = [{
	"Class": "active",
	"Href": "index.html",
	"Icon": "fa-tachometer",
	"Text": "Dashboard",
	"Children": []
}, {
	"Class": "",
	"Href": "#",
	"Icon": "fa-desktop",
	"Text": "UI&amp;Elements",
	"Children": [{
		"Class": "",
		"Href": "#",
		"Icon": "fa-caret-right",
		"Text": "Layouts",
		"Children": [{
			"Class": "",
			"Href": "top-menu.html",
			"Icon": "fa-caret-right",
			"Text": "TopMenu",
			"Children": []
		}, {
			"Class": "",
			"Href": "two-menu-1.html",
			"Icon": "fa-caret-right",
			"Text": "TwoMenus1",
			"Children": []
		}, {
			"Class": "",
			"Href": "two-menu-2.html",
			"Icon": "fa-caret-right",
			"Text": "TwoMenus2",
			"Children": []
		}, {
			"Class": "",
			"Href": "mobile-menu-1.html",
			"Icon": "fa-caret-right",
			"Text": "DefaultMobileMenu",
			"Children": []
		}, {
			"Class": "",
			"Href": "mobile-menu-2.html",
			"Icon": "fa-caret-right",
			"Text": "MobileMenu2",
			"Children": []
		}, {
			"Class": "",
			"Href": "mobile-menu-3.html",
			"Icon": "fa-caret-right",
			"Text": "MobileMenu3",
			"Children": []
		}]
	}, {
		"Class": "",
		"Href": "typography.html",
		"Icon": "fa-caret-right",
		"Text": "Typography",
		"Children": []
	}, {
		"Class": "",
		"Href": "elements.html",
		"Icon": "fa-caret-right",
		"Text": "Elements",
		"Children": []
	}, {
		"Class": "",
		"Href": "buttons.html",
		"Icon": "fa-caret-right",
		"Text": "Buttons&amp;Icons",
		"Children": []
	}, {
		"Class": "",
		"Href": "content-slider.html",
		"Icon": "fa-caret-right",
		"Text": "ContentSliders",
		"Children": []
	}, {
		"Class": "",
		"Href": "treeview.html",
		"Icon": "fa-caret-right",
		"Text": "Treeview",
		"Children": []
	}, {
		"Class": "",
		"Href": "jquery-ui.html",
		"Icon": "fa-caret-right",
		"Text": "jQueryUI",
		"Children": []
	}, {
		"Class": "",
		"Href": "nestable-list.html",
		"Icon": "fa-caret-right",
		"Text": "NestableLists",
		"Children": []
	}, {
		"Class": "",
		"Href": "#",
		"Icon": "fa-caret-right",
		"Text": "ThreeLevelMenu",
		"Children": [{
			"Class": "",
			"Href": "#",
			"Icon": "green",
			"Text": "Item#1",
			"Children": []
		}, {
			"Class": "",
			"Href": "#",
			"Icon": "orange",
			"Text": "4thlevel",
			"Children": []
		}, {
			"Class": "",
			"Href": "#",
			"Icon": "purple",
			"Text": "AddProduct",
			"Children": []
		}, {
			"Class": "",
			"Href": "#",
			"Icon": "pink",
			"Text": "ViewProducts",
			"Children": []
		}]
	}, {
		"Class": "",
		"Href": "top-menu.html",
		"Icon": "fa-caret-right",
		"Text": "TopMenu",
		"Children": []
	}, {
		"Class": "",
		"Href": "two-menu-1.html",
		"Icon": "fa-caret-right",
		"Text": "TwoMenus1",
		"Children": []
	}, {
		"Class": "",
		"Href": "two-menu-2.html",
		"Icon": "fa-caret-right",
		"Text": "TwoMenus2",
		"Children": []
	}, {
		"Class": "",
		"Href": "mobile-menu-1.html",
		"Icon": "fa-caret-right",
		"Text": "DefaultMobileMenu",
		"Children": []
	}, {
		"Class": "",
		"Href": "mobile-menu-2.html",
		"Icon": "fa-caret-right",
		"Text": "MobileMenu2",
		"Children": []
	}, {
		"Class": "",
		"Href": "mobile-menu-3.html",
		"Icon": "fa-caret-right",
		"Text": "MobileMenu3",
		"Children": []
	}, {
		"Class": "",
		"Href": "#",
		"Icon": "green",
		"Text": "Item#1",
		"Children": []
	}, {
		"Class": "",
		"Href": "#",
		"Icon": "orange",
		"Text": "4thlevel",
		"Children": [{
			"Class": "",
			"Href": "#",
			"Icon": "purple",
			"Text": "AddProduct",
			"Children": []
		}, {
			"Class": "",
			"Href": "#",
			"Icon": "pink",
			"Text": "ViewProducts",
			"Children": []
		}]
	}, {
		"Class": "",
		"Href": "#",
		"Icon": "purple",
		"Text": "AddProduct",
		"Children": []
	}, {
		"Class": "",
		"Href": "#",
		"Icon": "pink",
		"Text": "ViewProducts",
		"Children": []
	}]
}, {
	"Class": "",
	"Href": "#",
	"Icon": "fa-list",
	"Text": "Tables",
	"Children": [{
		"Class": "",
		"Href": "tables.html",
		"Icon": "fa-caret-right",
		"Text": "Simple&amp;Dynamic",
		"Children": []
	}, {
		"Class": "",
		"Href": "jqgrid.html",
		"Icon": "fa-caret-right",
		"Text": "jqGridplugin",
		"Children": []
	}]
}, {
	"Class": "",
	"Href": "#",
	"Icon": "fa-pencil-square-o",
	"Text": "Forms",
	"Children": [{
		"Class": "",
		"Href": "form-elements.html",
		"Icon": "fa-caret-right",
		"Text": "FormElements",
		"Children": []
	}, {
		"Class": "",
		"Href": "form-elements-2.html",
		"Icon": "fa-caret-right",
		"Text": "FormElements2",
		"Children": []
	}, {
		"Class": "",
		"Href": "form-wizard.html",
		"Icon": "fa-caret-right",
		"Text": "Wizard&amp;Validation",
		"Children": []
	}, {
		"Class": "",
		"Href": "wysiwyg.html",
		"Icon": "fa-caret-right",
		"Text": "Wysiwyg&amp;Markdown",
		"Children": []
	}, {
		"Class": "",
		"Href": "dropzone.html",
		"Icon": "fa-caret-right",
		"Text": "DropzoneFileUpload",
		"Children": []
	}]
}, {
	"Class": "",
	"Href": "widgets.html",
	"Icon": "fa-list-alt",
	"Text": "Widgets",
	"Children": []
}, {
	"Class": "",
	"Href": "calendar.html",
	"Icon": "fa-calendar",
	"Text": "Calendar",
	"Children": []
}, {
	"Class": "",
	"Href": "gallery.html",
	"Icon": "fa-picture-o",
	"Text": "Gallery",
	"Children": []
}, {
	"Class": "",
	"Href": "#",
	"Icon": "fa-tag",
	"Text": "MorePages",
	"Children": [{
		"Class": "",
		"Href": "profile.html",
		"Icon": "fa-caret-right",
		"Text": "UserProfile",
		"Children": []
	}, {
		"Class": "",
		"Href": "inbox.html",
		"Icon": "fa-caret-right",
		"Text": "Inbox",
		"Children": []
	}, {
		"Class": "",
		"Href": "pricing.html",
		"Icon": "fa-caret-right",
		"Text": "PricingTables",
		"Children": []
	}, {
		"Class": "",
		"Href": "invoice.html",
		"Icon": "fa-caret-right",
		"Text": "Invoice",
		"Children": []
	}, {
		"Class": "",
		"Href": "timeline.html",
		"Icon": "fa-caret-right",
		"Text": "Timeline",
		"Children": []
	}, {
		"Class": "",
		"Href": "search.html",
		"Icon": "fa-caret-right",
		"Text": "SearchResults",
		"Children": []
	}, {
		"Class": "",
		"Href": "email.html",
		"Icon": "fa-caret-right",
		"Text": "EmailTemplates",
		"Children": []
	}, {
		"Class": "",
		"Href": "login.html",
		"Icon": "fa-caret-right",
		"Text": "Login&amp;Register",
		"Children": []
	}]
}, {
	"Class": "",
	"Href": "#",
	"Icon": "fa-file-o",
	"Text": "OtherPages5",
	"Children": [{
		"Class": "",
		"Href": "faq.html",
		"Icon": "fa-caret-right",
		"Text": "FAQ",
		"Children": []
	}, {
		"Class": "",
		"Href": "error-404.html",
		"Icon": "fa-caret-right",
		"Text": "Error404",
		"Children": []
	}, {
		"Class": "",
		"Href": "error-500.html",
		"Icon": "fa-caret-right",
		"Text": "Error500",
		"Children": []
	}, {
		"Class": "",
		"Href": "grid.html",
		"Icon": "fa-caret-right",
		"Text": "Grid",
		"Children": []
	}, {
		"Class": "",
		"Href": "blank.html",
		"Icon": "fa-caret-right",
		"Text": "BlankPage",
		"Children": []
	}]
	}];
const apiUrl = 'https://localhost:5001/';
const adminUrls = {
	fiveonejob: {
		get: apiUrl + 'api/v1/fiveonejob/get',
		category: apiUrl + 'api/v1/fiveonejob/category',
		delete: apiUrl + 'api/v1/fiveonejob/delete',
		getlist: apiUrl + 'api/v1/fiveonejob/getlist',
	},
};
const navsString = "navs";
function getCookieNavString() {
	const str = document.cookie;
	if (str) {
		const strs = str.split(';');
		for (var i in strs) {
			const cookieStr = strs[i].split('=');
			if (cookieStr[0] == navsString) {
				return cookieStr[1];
            }
        }
	}
	return undefined;
}

function getCacheNavString() {
	let str = (localStorage && localStorage[navsString]);
	if (str != undefined)
		str = (sessionStorage && sessionStorage[navsString]);
		//|| (globalStorage && globalStorage[navsString])
	if (str != undefined)
		str=(document.cookie && getCookieNavString());
	return str;
}
function bindNavClickEvent() {
	$(".nav-list li a").click(function () {
		$(this).parent("li").toggleClass("open");
		$(this).addClass("active");
	});
}
function navHtml($) {
	//缓存里获取 缓存不支持重新获取
	let str = getCacheNavString();
	console.log(str);
	if (!str) {
		//已操作
		//return;
		str = recursionNav(navs);
		//缓存
		if (localStorage) localStorage[navsString] = str;
		else if (sessionStorage) sessionStorage[navsString] = str;
		//if (globalStorage) globalStorage[navsString] = str;
		else if (document.cookie) document.cookie +=  navsString + "=" + str+";";
    }
	$("ul.nav-list").html(str);
	//菜单绑定事件 不然无效 静态html 有效 (不需绑定该事件)
	bindNavClickEvent();
}
function recursionNav(nav) {
	let str = "";
	for (var i = 0; i < nav.length; i++) {
		let it = nav[i];
		str += "<li class=\"" + it.Class + "\">";
		str += "<a href=\"" + it.Href + "\"> <i class=\"menu-icon fa " + it.Icon + "\"></i> <span class=\"menu-text\"> " + it.Text + " </span> " +
			(it.Children.length == 0 ? "" : "<b class=\"arrow fa fa-angle-down\"></b>") + "</a> <b class=\"arrow\"></b>";
		if (it.Children.length > 0) {
			str += "<ul class=\"submenu\">";
			str += recursionNav(it.Children);
			str += "</ul>";
		}
		str += "</li>";
	}
	return str;
}
function AdminDataTable($,selector,url,columns) {
	this.tableInit = function () {
		//initiate dataTables plugin
		return $(selector)
			//.wrap("<div class='dataTables_borderWrap' />")   //if you are applying horizontal scrolling (sScrollX)
			.DataTable({
			"lengthMenu": [5, 10, 25, 50, 75, 100],
			"ordering": false,
			ajax: {
				url: url,
				method: "post",
				contentType: "application/json; charset=utf-8",
				dataType: 'json',
				data: function (it) {
					return JSON.stringify({ qi: 1, qs: 10 });
				},
				dataSrc: "data.data",
				dataFilter: function (json) {
					json = JSON.parse(json);
					//$("span.r > strong").html(json.data.result.records);
					var returnData = {};
					returnData.draw = 1;
					returnData.recordsTotal = json.data.result.records;  //返回数据全部记录  
					returnData.recordsFiltered = json.data.result.records;  //后台不实现过滤功能，每次查询均视作全部结果
					returnData.data = json.data;  //返回的数据列表
					return JSON.stringify(returnData);
				}
			},
			"createdRow": function (row, data, index) {
				//console.log(index);
				$('td', row).map(it => {
				    $('td', row).eq(it).attr("align", "center");
				});
			},
			columns: columns,
			//bAutoWidth: false,
			//"aoColumns": [
			//	{ "bSortable": false },
			//	null, { "bSortable": false }, { "bSortable": false }, null, null, null,
			//	{ "bSortable": false }
			//],
			//"aaSorting": [],
			//"bProcessing": true,
			//"bServerSide": true,
			//"sAjaxSource": "http://127.0.0.1/table.php",
			//"sScrollY": "200px",
			//"bPaginate": false,
			//"sScrollX": "100%",
			//"sScrollXInner": "120%",
			//"bScrollCollapse": true,
			//Note: if you are applying horizontal scrolling (sScrollX) on a ".table-bordered"
			//you may want to wrap the table inside a "div.dataTables_borderWrap" element
			//"iDisplayLength": 50
			select: {
				style: 'multi'
			}
		});
	};
}

function AdminJqGrid() {
	var obj = null;
	this.url = {};
	var self1 = this;
    /**
     * 在客户端我们可以有下面两种方法得到这些额外信息：
     * @param key
     */
	this.getUserData = function (key) {
		return key ? obj.getUserDataItem(key) : obj.getUserData() || obj.getUserData('userData');
	}
	var options = {
		pager: '#page',//定义翻页用的导航栏，必须是有效的html元素。翻页工具栏可以放置在html页面任意位置
		rowNum: 10,//在grid上显示记录条数，这个参数是要被传递到后台
		rowList: [10, 20, 30],//一个下拉选择框，用来改变显示记录数，当选择时会覆盖rowNum参数传递到后台
		sortname: 'id',//默认的排序列。可以是列名称或者是一个数字，这个参数会被提交到后台
		viewrecords: true,//定义是否要显示总记录数
		height: 200,// 'auto',//表格高度，可以是数字，像素值或者百分比 150
		autowidth: true,//如果为ture时，则当表格在首次被创建时会根据父元素比例重新调整表格宽度。如果父元素宽度改变，为了使表格宽度能够自动调整则需要实现函数：setGridWidth
		//描述json 数据格式的数组
		//需要定义jsonReader来跟服务器端返回的数据做对应，其默认值
		jsonReader: {
			root: "data.data",//"rows",//包含实际数据的数组
			page: "data.result.page",//当前页
			total: "data.result.total",//总页数
			records: "data.result.records",//查询出的记录数
			repeatitems: true,//指明每行的数据是可以重复的，如果设为false，则会从返回的数据中按名字来搜索元素，这个名字就是colModel中的名字
			cell: "cell",//当前行的所有单元格
			id: "id",//行id id属性值为“invid”。 一旦当此属性设为false时，我们就不必把所有在colModel定义的name值都赋值。因为是按name来进行搜索元素的，所以他的排序也不是按colModel中指定的排序结果。
			userdata: "userdata",//用户数据（user data） 在某些情况下，我们需要从服务器端返回一些参数但并不想直接把他们显示到表格中，而是想在别的地方显示，那么我们就需要用到userdata标签
			subgrid: {
				root: "data.data.children",
				repeatitems: true,
				cell: "cell"
			}
		},
		url: '',//获取数据的地址
		datatype: "json",//从服务器端返回的数据类型，默认xml。可选类型：xml，local，json，jsonnp，script，xmlstring，jsonstring，clientside
		mtype: 'post',//ajax提交方式。POST或者GET，默认GET
		loadtext: '数据加载中.......',//	string	当请求或者排序时所显示的文字内容
		multiselect: true,
		rownumbers: true,
		page: 1,//指定初始化页码
		gridComplete: function () {
			//$("#table").closest("div.ui-jqgrid-view")
			//	.children("div.ui-jqgrid-titlebar")
			//	.css("text-align", "center")
			//	.children("span.ui-jqgrid-title")
			//	.css("float", "none");
			//var rowNum =  $("#table").jqGrid('getGridParam', 'rowNum'); 
			//var total = $("#table").jqGrid('getGridParam', 'records'); //获取查询得到的总记录数量
			
		},
		//当选择行时触发此事件。rowid：当前行id；status：选择状态，当multiselect 为true时此参数才可用
		onSelectRow: function (rowid, status) {
			//其他样式受影响
			//$("tbody > tr[id='" + rowid + "']").removeClass("ui-state-highlight");
		},
		//multiselect为ture，且点击头部的checkbox时才会触发此事件。aRowids：所有选中行的id集合，为一个数组。status：boolean变量说明checkbox的选择状态，true选中false不选中。无论checkbox是否选择，aRowids始终有 值
		onSelectAll: function (aRowids, status) {
			//其他样式受影响
			//$("tbody > tr[role='row']").removeClass("ui-state-highlight");
			//console.log(aRowids);
		},
		//当从服务器返回响应时执行，xhr：XMLHttpRequest 对象
		loadComplete: function (data) {
			//console.log(data);
		},
		//当用户点击当前行在未选择此行时触发。rowid：此行id；e：事件对象。返回值为ture或者false。如果返回true则选择完成，如果返回false则不会选择此行也不会触发其他事件
		beforeSelectRow: function (rowid, e) {
			//if (e.type == 'click') {
			//	let i = $.jgrid.getCellIndex($(e.target).closest('td')[0]),
			//		cm = jQuery("#table").jqGrid('getGridParam', 'colModel');
			//	return (cm[i].name != 'act' && cm[i].name != 'enable'); //当点击的单元格的名字不是为act时，才触发选择行事件
			//}
			return false;
		},
		//当点击单元格时触发。rowid：当前行id；iCol：当前单元格索引；cellContent：当前单元格内容；e：event对象
		onCellSelect: function (rowid, iCol, cellcontent, e) {
			//beforeSelectRow事件没有返回 true 该事件无法触发
			if (iCol == 2) {
				console.log("enable index 2 onCellSelect event trigger ");
			}
			// console.log(" index " + iCol + " onCellSelect event trigger ");
		},
		//双击行时触发。rowid：当前行id；iRow：当前行索引位置；iCol：当前单元格位置索引；e:event对象
		ondblClickRow: function (rowid, iRow, iCol, e) {
		
		},
	};
	this.options = options;
	var search = function () {
		$("#search").click(function () {
			console.log(111);
			let da = emptyQueryData();
			var pd = $("#table").jqGrid('getGridParam', 'postData');
			pd = $.extend(pd, da);
			$("#table").jqGrid('setGridParam', 'postData', pd);
			$("#table").trigger("reloadGrid");
			$("#clear").trigger("click");
		});
	};
	this.search = search;

}